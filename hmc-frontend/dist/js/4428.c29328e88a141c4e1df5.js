"use strict";(self.webpackChunkHMC=self.webpackChunkHMC||[]).push([[4428],{87155:(e,t,n)=>{n.d(t,{Z:()=>Q});var l=n(28760),a=n.n(l),r=n(73126),o=n(68420),s=n(27344),i=n(5281),c=n(84441),u=n(3020),p=n(3362),d=n(44845),m=n(39022),h=n.n(m),f=n(67294),v=n(69035),y=n(66253),E=n(44930),Z=n(30222),g=n.n(Z),C=n(76986),x=n.n(C),b=n(87198),w=n.n(b),S=n(11882),k=n.n(S),I=n(97606),D=n.n(I),N=n(9676),K=n(45360),O=n(31097),P=n(67908),_=n(4107),B=n(34041),M=n(77268),R=n(43663),L={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}}},G=n(72536);function A(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,l=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=a()(l,arguments,r)}else n=l.apply(this,arguments);return(0,u.Z)(this,n)}}var H=v.Z.Item,T=y.ZP.Group,F=N.Z.Group,q=function(e){(0,c.Z)(n,e);var t=A(n);function n(){var e,l;(0,o.Z)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return l=t.call.apply(t,h()(e=[this]).call(e,r)),(0,d.Z)((0,i.Z)(l),"state",{canGoOn:!1,fileName:"",method:2,testLoading:!1,showErrorHost:!1,canInstallHost:[],installLoading:!1,hostGroups:[],showResultModel:!1,isCreateGroup:!1,addHostData:{},showDetermine:!0,encryptInfo:{}}),(0,d.Z)((0,i.Z)(l),"secretKey",f.createRef()),(0,d.Z)((0,i.Z)(l),"getPublicKey",(0,E.Z)(g().mark((function e(){var t,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.bS.getPublicKey();case 2:if(t=e.sent,0===(n=t.data).code){e.next=6;break}return e.abrupt("return");case 6:l.setState({encryptInfo:n.data});case 7:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,i.Z)(l),"loadAllGroups",(function(){var e=l.props.clusterInfo,t=void 0===e?{}:e,n=t.type,a=t.id;R.t6.getClusterhostGroupLists({type:n,id:a}).then((function(e){0===(e=e.data).code&&l.setState({hostGroups:e.data||[]})}))})),(0,d.Z)((0,i.Z)(l),"installHost",(function(){var e=l.props,t=e.form,n=e.clusterInfo,a=void 0===n?{}:n,r=l.state.encryptInfo,o=r.encrypt_type,s=r.encrypt_public_key,i=t.getFieldValue("group");t.validateFields((function(e,t){if(!e){var n=l.state.canInstallHost.toString();l.setState({installLoading:!0});var r={host:n,port:t.port,user:t.user,group:t.group,cluster_type:a.type,cluster_id:a.id,role:t.role?t.role.join(","):void 0};1===l.state.method?x()(r,{type:"pk",pk:t.pk}):x()(r,{type:"pwd",password:"sm2"===o?(0,G.ON)(t.password,s):(0,G.g8)(t.password,s)}),R.y$.installHost(r,l.state.method).then((function(e){0!==(e=e.data).code?(K.Z.error(e.msg),l.setState({installLoading:!1})):(w()((function(){l.props.refresh(i)}),1e3),l.props.afterInstall(),l.setState({installLoading:!1}))}))}}))})),(0,d.Z)((0,i.Z)(l),"testConnection",(function(){var e=l.state.encryptInfo,t=e.encrypt_type,n=e.encrypt_public_key;l.setState({showErrorHost:!1}),l.props.form.validateFields((function(e,a){if(!e){var r;a.role=a.role?a.role.join(","):void 0,a.password="sm2"===t?(0,G.ON)(a.password,n):(0,G.g8)(a.password,n),l.setState({testLoading:!0,canGoOn:!1,canInstallHost:[]});var o=(null==a||null===(r=a.host)||void 0===r?void 0:k()(r).call(r,","))>-1?null==a?void 0:a.host.split(","):[a.host];R.y$.testConnection(a,l.state.method).then((function(e){var t=e.data,n=t.code,a=t.data,r=t.msg;if(0!==n)return K.Z.error(r),void l.setState({testLoading:!1});l.setState({testLoading:!1,canInstallHost:o},(function(){var e=a.connectErrorIps,t=a.currentClusterExistIp,n=a.otherClusterExistIp;0===(null==e?void 0:e.length)&&0===(null==t?void 0:t.length)&&0===(null==n?void 0:n.length)?(K.Z.success("测试连通性通过"),l.setState({showDetermine:!1,showResultModel:!1})):l.setState((function(){return{showResultModel:!0,addHostData:a}}))}))}))}}))})),(0,d.Z)((0,i.Z)(l),"handleMethodChange",(function(e){l.setState({method:e.target.value})})),(0,d.Z)((0,i.Z)(l),"uploadSecret",(function(){var e=l.props.form,t=l.secretKey.files[0];if(t)if(t.size/1024>=100)K.Z.warn("请选择小于100Kb文件上传！");else if(window.FileReader){var n=new FileReader;n.readAsText(t),n.onload=function(t){e.setFieldsValue({pk:t.target.result})},l.setState({fileName:t.name}),l.secretKey.value=""}else K.Z.warn("浏览器不支持");else K.Z.warn("请选择上传的秘钥")})),(0,d.Z)((0,i.Z)(l),"handleGroupBlurChange",(function(e){"CREATENEWGROUP"===e&&l.setState({isCreateGroup:!0},(function(){l.props.form.setFieldsValue({group:""})}))})),l}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.loadAllGroups(),this.getPublicKey()}},{key:"handleGroupBlur",value:function(e){}},{key:"render",value:function(){var e,t,n,l,a,o,s,i=this,c=this.props.clusterInfo,u=void 0===c?{}:c,p=this.props.form.getFieldDecorator,d=this.state.addHostData;return f.createElement("div",{className:"step-account"},f.createElement(v.Z,{style:{marginBottom:20}},f.createElement(H,(0,r.Z)({style:{marginBottom:20}},L,{label:f.createElement("span",null,"主机分组",f.createElement(O.Z,{title:"主机分组是对主机的划分，当集群中主机过多时，可对主机进行分组，方便管理。"},f.createElement(P.Z,{type:"question-circle"})))}),p("group",{})(this.state.isCreateGroup?f.createElement(_.Z,{placeholder:"输入新的分组名称"}):f.createElement(B.Z,{onChange:this.handleGroupBlurChange,onBlur:this.handleGroupBlur},f.createElement(B.Z.Option,{value:"CREATENEWGROUP"},"新建主机分组"),this.state.hostGroups&&D()(e=this.state.hostGroups).call(e,(function(e,t){return f.createElement(B.Z.Option,{value:e,key:t+""},e)}))))),f.createElement(H,(0,r.Z)({style:{marginBottom:0}},L,{label:"机器IP"}),p("host",{rules:[{required:!0,message:"机器IP不能为空"}]})(f.createElement(_.Z.TextArea,{rows:4,placeholder:"支持输入多个IP及IP段。多个IP用英文都逗号分隔，如172.16.10,171.12.10.9。IP段用英文‘-’连接，如172.16.10-80。"}))),f.createElement(H,(0,r.Z)({style:{marginTop:20}},L,{label:"SSH接口"}),p("port",{rules:[{required:!0,message:"SSH端口不能为空"}],initialValue:"22"})(f.createElement(_.Z,null))),"kubernetes"===u.type&&f.createElement(H,(0,r.Z)({},L,{label:f.createElement(O.Z,{title:f.createElement("div",null,f.createElement("p",null,"主机角色说明："),f.createElement("p",null,"Etcd角色节点：运行etcd组件，用于存储Kubernetes集群配置数据。"),f.createElement("p",null,"Control角色节点：运行Kubernetes主组件（kube-apiserver，kube-scheduler，kube-controller-manager和cloud-controller-manager）。"),f.createElement("p",null,"Worker角色节点：运行Kubernetes kubelet，kube-proxy，Container runtime组件。"))},f.createElement("span",null,"主机角色"),f.createElement(P.Z,{type:"question-circle"}))}),p("role",{rules:[{required:!0,message:"主机角色不能为空"}],initialValue:["Etcd","Control","Worker"]})(f.createElement(F,null,f.createElement(N.Z,{value:"Etcd"},"Etcd"),f.createElement(N.Z,{value:"Control"},"Control"),f.createElement(N.Z,{value:"Worker"},"Worker")))),f.createElement(H,(0,r.Z)({},L,{label:"登录方式"}),f.createElement(T,{value:this.state.method,onChange:this.handleMethodChange},f.createElement(y.ZP,{value:1},"密钥"),f.createElement(y.ZP,{value:2},"密码"))),f.createElement(H,(0,r.Z)({},L,{label:"用户名",extra:"需要sudo+NOPASSWD权限"}),p("user",{rules:[{required:!0,message:"用户名不能为空"}],initialValue:"admin"})(f.createElement(_.Z,null))),2===this.state.method?f.createElement(H,(0,r.Z)({},L,{label:"密码"}),p("password",{rules:[{required:!0,message:"密码不能为空"}]})(f.createElement(_.Z.Password,null))):f.createElement(H,(0,r.Z)({},L,{label:"密钥"}),p("pk",{rules:[{required:!0,message:"密钥不可为空!"}]})(f.createElement(_.Z,{style:{display:"none"}})),f.createElement("label",{className:"ant-btn"},"上传秘钥文件",f.createElement("input",{ref:function(e){return i.secretKey=e},type:"file",onChange:this.uploadSecret,style:{display:"none"}})),f.createElement("span",null,this.state.fileName))),this.state.showResultModel?f.createElement("div",{style:{marginBottom:20}},f.createElement("p",null,f.createElement(P.Z,{type:"close-circle",style:{color:"red",fontSize:14,marginRight:6},theme:"filled"}),"异常IP列表:"),f.createElement("div",{className:"error-desc"},null!=d&&null!==(t=d.connectErrorIps)&&void 0!==t&&t.length?f.createElement("p",null,"- 连通失败IP：",(null==d||null===(n=d.connectErrorIps)||void 0===n?void 0:n.join(","))||"无"):"",null!=d&&null!==(l=d.currentClusterExistIp)&&void 0!==l&&l.length?f.createElement("p",null,"- 以下IP在当前集群已存在：",(null==d||null===(a=d.currentClusterExistIp)||void 0===a?void 0:a.join(","))||"无"):"",null!=d&&null!==(o=d.otherClusterExistIp)&&void 0!==o&&o.length?f.createElement("p",null,"- 以下IP在其他集群已存在：",(null==d||null===(s=d.otherClusterExistIp)||void 0===s?void 0:s.join(","))||"无"):"")):"",f.createElement("div",{className:"btn-container"},f.createElement(M.Z,{loading:this.state.testLoading,type:"primary",onClick:this.testConnection},"测试连通性"),f.createElement("div",null,f.createElement(M.Z,{onClick:this.props.onCancel,type:"default",className:"mr-8"},"取消"),f.createElement(M.Z,{onClick:this.installHost,type:"primary",loading:this.state.installLoading,disabled:this.state.showResultModel||this.state.showDetermine},"确定"))))}}]),n}(f.Component);const V=v.Z.create()(q);function W(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,l=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=a()(l,arguments,r)}else n=l.apply(this,arguments);return(0,u.Z)(this,n)}}var j=N.Z.Group,J=v.Z.Item,z=function(e){(0,c.Z)(n,e);var t=W(n);function n(){var e,l;(0,o.Z)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return l=t.call.apply(t,h()(e=[this]).call(e,r)),(0,d.Z)((0,i.Z)(l),"state",{canGoOn:!1,cmdContent:"",roles:["Etcd","Control","Worker"],formItemMsg:{status:"success",help:""}}),(0,d.Z)((0,i.Z)(l),"fetchInstallCmd",(function(){var e=l.props.clusterInfo,t=void 0===e?{}:e,n=t.type,a=t.id;R.jy.getInstallCMD({type:n,clusterId:a,role:l.state.roles.join(",")}).then((function(e){0===e.data.code?l.setState({cmdContent:e.data.data}):K.Z.error(e.data.msg)}))})),(0,d.Z)((0,i.Z)(l),"handleChange",(function(e){l.setState({roles:e},(function(){l.fetchInstallCmd(),l.handleCheck()}))})),(0,d.Z)((0,i.Z)(l),"handleCheck",(function(){var e={status:"error",help:"请选择主机角色"};return l.state.roles.length&&(e.status="success",e.help=""),l.setState({formItemMsg:e}),e.status})),(0,d.Z)((0,i.Z)(l),"handleCopy",(function(){var e=l.props.clusterInfo;if("success"===("kubernetes"===(void 0===e?{}:e).type?l.handleCheck():"success")){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),document.getElementById("J_CopyBtn").dispatchEvent(t)}})),l}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.fetchInstallCmd()}},{key:"render",value:function(){var e=this.props.clusterInfo,t=void 0===e?{}:e,n=this.state,l=n.formItemMsg,a=n.roles;return f.createElement("div",{className:"step-shell"},"kubernetes"===t.type&&f.createElement(v.Z,null,f.createElement(J,(0,r.Z)({},L,{required:!0,validateStatus:l.status,help:l.help,label:f.createElement(O.Z,{title:f.createElement("div",null,f.createElement("p",null,"主机角色说明："),f.createElement("p",null,"Etcd角色节点：运行etcd组件，用于存储Kubernetes集群配置数据。"),f.createElement("p",null,"Control角色节点：运行Kubernetes主组件（kube-apiserver，kube-scheduler，kube-controller-manager和cloud-controller-manager）。"),f.createElement("p",null,"Worker角色节点：运行Kubernetes kubelet，kube-proxy，Container runtime组件。"))},f.createElement("span",null,"主机角色"),f.createElement(P.Z,{type:"question-circle"}))}),f.createElement(j,{value:a,onChange:this.handleChange},f.createElement(N.Z,{value:"Etcd"},"Etcd"),f.createElement(N.Z,{value:"Control"},"Control"),f.createElement(N.Z,{value:"Worker"},"Worker")))),f.createElement("div",{className:"clearfix"},f.createElement("div",{className:"ant-col ant-form-item-control-wrapper ant-col-xs-24 ant-col-sm-18 ant-col-offset-3"},f.createElement("p",{style:{fontSize:12,color:"#333",marginBottom:8}},"复制下面命令到命令行执行："),f.createElement(_.Z.TextArea,{id:"J_CMDCode",rows:7,value:this.state.cmdContent}),f.createElement(M.Z,{className:"mt-10 mb-20",onClick:this.handleCopy},"复制代码"),f.createElement(M.Z,{style:{visibility:"hidden"},id:"J_CopyBtn","data-clipboard-action":"cut","data-clipboard-target":"#J_CMDCode"}))),f.createElement("div",{style:{textAlign:"right",marginTop:"28px"}},f.createElement(M.Z,{className:"mr-8",type:"default",onClick:this.props.onCancel},"取消"),f.createElement(M.Z,{type:"primary",onClick:this.props.onCancel},"确定")))}}]),n}(f.Component);function U(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,l=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=a()(l,arguments,r)}else n=l.apply(this,arguments);return(0,u.Z)(this,n)}}var Y=v.Z.Item,$=y.ZP.Group;const Q=function(e){(0,c.Z)(n,e);var t=U(n);function n(){var e,l;(0,o.Z)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return l=t.call.apply(t,h()(e=[this]).call(e,r)),(0,d.Z)((0,i.Z)(l),"state",{radioType:"account"}),(0,d.Z)((0,i.Z)(l),"handleRadioChange",(function(e){l.setState({radioType:e.target.value})})),l}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.state.radioType,t=this.props,n={afterInstall:t.afterInstall,refresh:t.refresh,clusterInfo:t.clusterInfo,onCancel:t.onCancel};return f.createElement("div",{className:"create-host-container"},f.createElement(v.Z,null,f.createElement(Y,(0,r.Z)({label:"接入方式"},L),f.createElement($,{value:e,onChange:this.handleRadioChange},f.createElement(y.ZP,{value:"account"},"账号接入"),f.createElement(y.ZP,{value:"shell"},"命令行接入")))),"account"===e?f.createElement(V,n):f.createElement(z,n))}}]),n}(f.Component)},19331:(e,t,n)=>{n.d(t,{Z:()=>E});var l=n(28760),a=n.n(l),r=n(68420),o=n(27344),s=n(5281),i=n(84441),c=n(3020),u=n(3362),p=n(44845),d=n(39022),m=n.n(d),h=n(67294),f=n(35949),v=n(45360);function y(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,l=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;n=a()(l,arguments,r)}else n=l.apply(this,arguments);return(0,c.Z)(this,n)}}var E=function(e){(0,i.Z)(n,e);var t=y(n);function n(){var e,l;(0,r.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return l=t.call.apply(t,m()(e=[this]).call(e,o)),(0,p.Z)((0,s.Z)(l),"state",{fileContent:"",fileViewShow:!1}),(0,p.Z)((0,s.Z)(l),"ws",void 0),(0,p.Z)((0,s.Z)(l),"handleShowLog",(function(e){e.preventDefault(),l.setState({fileViewShow:!0},(function(){l.websocketLink()}))})),(0,p.Z)((0,s.Z)(l),"websocketLink",(function(){var e=!1,t=l.props.wsUrl;l.ws=new WebSocket(t),l.ws.onmessage=function(e){l.setState({fileContent:e.data})},l.ws.onerror=function(t){e=!0,v.Z.error("实时日志获取失败！")},l.ws.onclose=function(){l.state.fileViewShow&&!e&&l.websocketLink()}})),l}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.fileViewShow,l=t.fileContent;return h.createElement(h.Fragment,null,h.createElement("a",{style:{fontSize:"12px",display:"inline-block",marginTop:"10px"},onClick:this.handleShowLog},"查看完整日志"),n&&h.createElement(f.Z,{title:"日志",serviceData:null,maskClosable:!0,visible:n,content:l,fileGoBottom:!0,loading:!0,onCancel:function(){e.setState({fileViewShow:!1,fileContent:""},(function(){e.ws.close()}))}}))}}]),n}(h.PureComponent)},35949:(e,t,n)=>{n.d(t,{Z:()=>D});var l=n(28760),a=n.n(l),r=n(68420),o=n(27344),s=n(5281),i=n(84441),c=n(3020),u=n(3362),p=n(44845),d=n(97606),m=n.n(d),h=n(81607),f=n.n(h),v=n(39022),y=n.n(v),E=n(67294),Z=n(34041),g=n(85733),C=n(30258),x=n(31097),b=n(4107),w=n(67908);function S(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,l=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;n=a()(l,arguments,r)}else n=l.apply(this,arguments);return(0,c.Z)(this,n)}}var k=Z.Z.Option,I=g.Z.TreeNode,D=function(e){(0,i.Z)(n,e);var t=S(n);function n(e){var l;return(0,r.Z)(this,n),l=t.call(this,e),(0,p.Z)((0,s.Z)(l),"state",{first_logfile:"",second_logfile:"",show_second_select:!1,second_logs:[],log_message:"",lineNum:"200",searchText:"",sourceText:"",query:""}),(0,p.Z)((0,s.Z)(l),"onSearch",(function(e){l.setState({query:e},(function(){l.setLogMessage(l.props.content,!1)}))})),(0,p.Z)((0,s.Z)(l),"setContent",(function(e){var t=l.setQueryKey(e),n=new RegExp(/([\S ]*ERROR[\S ]*)/,"gi");return t.replace(n,'<span style="color: red">$1</span>')})),(0,p.Z)((0,s.Z)(l),"setQueryKey",(function(e){var t=l.state.query;if(""===t)return e;var n=t.toLowerCase(),a=new RegExp("(".concat(n,")"),"gi");return e.replace(a,'<span style="color: #2391F7">$1</span>')})),(0,p.Z)((0,s.Z)(l),"setLogMessage",(function(e,t){var n=l.props.fileGoBottom,a=document.getElementById("textPre");a&&(a.innerHTML=l.setContent(e||""),(void 0===t?n:t)&&document.getElementsByClassName("log-message-box").length>0&&document.getElementsByClassName("log-message-box")[0].scrollTo(0,a.offsetHeight))})),(0,p.Z)((0,s.Z)(l),"renderServiceSelect",(function(){var e=l.props,t=e.serviceData,n=e.onSelectedService;return E.createElement(g.Z,{showSearch:!0,style:{width:200,marginRight:10},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"按服务搜索",allowClear:!0,treeDefaultExpandAll:!0,onChange:n},function(e){var t=[],n=function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var l=e[n];t.push(E.createElement(I,{value:n,title:n,key:n,selectable:!1},l&&m()(l).call(l,(function(e){return E.createElement(I,{isLeaf:!0,value:e.service_name,title:e.service_name_display,key:n+"-"+e.service_name})}))))}};for(var l in e)n(l);return t}(t))})),l}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.setLogMessage(this.props.content)}},{key:"componentDidUpdate",value:function(e,t){var n=document.getElementById("textPre");this.props.content===e.content&&this.props.content&&!n.innerHTML&&this.setLogMessage(this.props.content),this.props.content!==e.content&&this.setLogMessage(this.props.content)}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onCancel,l=e.title,a=e.maskClosable,r=e.onSelectedFile,o=e.fileList,s=e.content,i=e.selectedFile,c=e.serviceData,u=e.loading;return E.createElement(C.Z,{className:"logtail-box",destroyOnClose:!0,title:l,footer:null,width:800,visible:t,maskClosable:a,onCancel:n},E.createElement("div",{className:"logtail-box"},E.createElement("div",{className:"option-bar",style:{display:"flex"}},c&&E.createElement("span",null,this.renderServiceSelect()),o?E.createElement(Z.Z,{allowClear:!0,showSearch:!0,placeholder:"选择文件",value:i,style:{width:200,marginBottom:10,marginRight:10},onChange:r},m()(o).call(o,(function(e,t){var n,l=f()(e).call(e);return E.createElement(k,{key:y()(n="".concat(l,"-")).call(n,t),value:l},E.createElement(x.Z,{title:l},l))}))):null,E.createElement(b.Z.Search,{placeholder:"输入关键词",style:{width:200,marginBottom:10},onSearch:this.onSearch})),E.createElement("div",{className:"log-message-box",style:{height:"400px",paddingTop:"10px",overflowY:"auto",backgroundColor:"#F5F5F5",border:"1px dashed #DDDDDD"}},s?E.createElement("pre",{id:"textPre",style:{paddingLeft:10,height:"auto"}}):null,""===s?E.createElement("div",{style:{lineHeight:"380px",color:"#dddddd",textAlign:"center"}},"没有记录"):null,null===s?E.createElement("div",{style:{lineHeight:"380px",color:"#dddddd",textAlign:"center"}},"请选择上方过滤条件"):null,u&&s&&E.createElement(w.Z,{className:"ml-10",type:"loading"}))))}}]),n}(E.Component)},11699:(e,t,n)=>{n.d(t,{Z:()=>d});var l=n(67294),a=n(4107),r=n(39144),o=n(77268),s=n(67908),i=n(94184),c=n.n(i),u=n(74981),p=(n(12477),n(40049),a.Z.TextArea);const d=function(e){var t=e.yaml,n=e.readOnly;return l.createElement(r.Z,{title:"YAML",size:"small",className:"c-yaml-editor__ant-card",extra:l.createElement("div",{style:{display:"flex"}},l.createElement(p,{id:"J_CMDCode",value:t,style:{position:"absolute",opacity:0,zIndex:-10}}),l.createElement(o.Z,{id:"J_CopyBtn",type:"link",style:{padding:0},"data-clipboard-action":"cut","data-clipboard-target":"#J_CMDCode"},l.createElement(s.Z,{type:"copy"})," 复制到剪贴板"))},l.createElement(u.ZP,{className:c()({yaml_editor_readonly:n}),mode:"yaml",theme:"kuroir",value:t,readOnly:n||!1,width:"100%",height:"100%",onChange:e.onChange,name:"ADVANCED_MODE_DIV"}))}},4243:(e,t,n)=>{n.d(t,{E9:()=>s,MD:()=>l,OY:()=>r,RI:()=>o,XN:()=>a});var l=[{text:"部署成功",value:"deployed"},{text:"部署失败",value:"deploy fail"},{text:"部署中",value:"deploying"},{text:"卸载失败",value:"undeploy fail"},{text:"卸载中",value:"undeploying"}],a=[{text:"更新成功",value:"success"},{text:"更新失败",value:"fail"},{text:"更新中",value:"update"}],r={hosts:["主机集群"],kubernetes:["Kubernetes集群（自建集群）","Kubernetes集群（导入已有集群）"]},o={hosts:{title:"主机安装会经过2个状态：管控安装-主机初始化，若某一步安装失败，请查看具体日志。",filters:[{text:"管控安装成功",value:"管控安装成功"},{text:"管控安装失败",value:"管控安装失败"},{text:"script安装成功",value:"script安装成功"},{text:"script安装失败",value:"script安装失败"},{text:"主机初始化成功",value:"主机初始化成功"},{text:"主机初始化失败",value:"主机初始化失败"}],finalStatus:3},kubernetes:{title:"Kubernetes集群主机安装会经过5个状态：管控安装-主机初始化-K8S Docker初始化-K8S Node初始化-K8S Node部署成功，若某一步安装失败，请查看具体日志",filters:[{text:"管控安装失败",value:"管控安装失败",status:-1},{text:"管控安装成功",value:"管控安装成功",status:1},{text:"主机初始化失败",value:"主机初始化失败",status:-3},{text:"主机初始化成功",value:"主机初始化成功",status:3},{text:"K8S DOCKER初始化失败",value:"K8S DOCKER初始化失败",status:-5},{text:"K8S DOCKER初始化成功",value:"K8S DOCKER初始化成功",status:5},{text:"K8S NODE初始化失败",value:"K8S NODE初始化失败",status:-6},{text:"K8S NODE初始化成功",value:"K8S NODE初始化成功",status:6},{text:"K8S NODE部署失败",value:"K8S NODE部署失败",status:-7},{text:"K8S NODE部署成功",value:"K8S NODE部署成功",status:7}],finalStatus:7}},s={NAMESPACE:"em_current_k8s_namespace"}},187:(e,t,n)=>{n.d(t,{Y:()=>a,v:()=>l});var l={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:12}}},a={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}}}}]);