"use strict";(self.webpackChunkHMC=self.webpackChunkHMC||[]).push([[8273],{10152:(e,t,n)=>{n.r(t),n.d(t,{default:()=>xe,linkMap:()=>Ie});var r=n(28760),a=n.n(r),o=n(28222),l=n.n(o),s=n(80222),c=n.n(s),i=n(14418),u=n.n(i),d=n(8446),p=n.n(d),f=n(86),m=n.n(f),h=n(66870),v=n.n(h),g=n(29747),Z=n.n(g),y=n(96718),E=n.n(y),b=n(73126),_=n(44930),C=n(68420),w=n(27344),k=n(5281),S=n(84441),I=n(3020),x=n(3362),N=n(44845),P=n(30222),M=n.n(P),H=n(76986),K=n.n(H),D=n(39022),R=n.n(D),G=n(67294),O=n(53825),F=n(29027),L=n(97779),T=n(53138),q=n(64158),B=n(67908),A=n(77268),j=n(82193),U=n(97606),V=n.n(U),Y=n(51679),$=n.n(Y),W=n(58118),z=n.n(W),J=n(58309),Q=n.n(J),X=n(69035),ee=n(4107),te=n(34041),ne=n(45360),re=n(43663),ae=n(93320),oe=n(11699);function le(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,x.Z)(e);if(t){var o=(0,x.Z)(this).constructor;n=a()(r,arguments,o)}else n=r.apply(this,arguments);return(0,I.Z)(this,n)}}var se=X.Z.Item,ce=ee.Z.TextArea,ie=te.Z.Option,ue={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:9}}},de=function(e){(0,S.Z)(n,e);var t=le(n);function n(){var e,r;(0,C.Z)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return r=t.call.apply(t,R()(e=[this]).call(e,o)),(0,N.Z)((0,k.Z)(r),"state",{versions:[],networkPlugins:[],avaliable:[],advancedMode:!1}),(0,N.Z)((0,k.Z)(r),"getKubernetesAvaliable",(function(e){re.TN.getKubernetesAvaliable({mode:e}).then((function(e){if(0===(e=e.data).code){var t,n=V()(t=e.data).call(t,(function(e){return e.version})),a=e.data[0].properties,o=(void 0===a?{}:a).network_plugin;r.setState({versions:n,networkPlugins:o,avaliable:e.data}),r.props.action.setClusterInfo({version:n[0],network_plugin:o[0]})}}))})),(0,N.Z)((0,k.Z)(r),"handleVersionChange",(function(e){var t=r.props,n=t.clusterInfo,a=void 0===n?{}:n,o=t.form,l=r.state.avaliable,s=void 0===l?[]:l,c=($()(s).call(s,(function(t){return t.version===e}))||{}).properties,i=void 0===c?{}:c,u=i.network_plugin[0];r.props.action.setClusterInfo({version:e,network_plugin:u}),a.yaml&&r.setYaml(e,u),o.setFieldsValue({network_plugin:u}),r.setState({networkPlugins:i.network_plugin})})),(0,N.Z)((0,k.Z)(r),"handlePluginChange",(function(e){var t=r.props.clusterInfo,n=t.yaml,a=t.version;n&&r.setYaml(a,e)})),(0,N.Z)((0,k.Z)(r),"setYaml",(function(e,t){var n=ae.load(r.props.clusterInfo.yaml)||{};n.kubernetes_version=e,n.network.plugin=t,r.props.action.setClusterInfo({yaml:ae.dump(n)})})),(0,N.Z)((0,k.Z)(r),"handleModeClick",(function(e){e.preventDefault();var t=r.state.advancedMode,n=r.props,a=n.clusterInfo,o=n.form;t?r.validateYaml()&&r.setState({advancedMode:!t}):o.validateFields(["name","version","network_plugin"],(function(e,n){e||(!a.yaml&&r.props.action.getTemplate(n),r.setState({advancedMode:!t}))}))})),(0,N.Z)((0,k.Z)(r),"handleYamlChange",(function(e){r.props.action.setClusterInfo({yaml:e})})),(0,N.Z)((0,k.Z)(r),"validateYaml",(function(){var e=r.props.clusterInfo.yaml,t=r.state,n=t.versions,a=t.networkPlugins;try{var o=ae.safeLoad(e),l=o.kubernetes_version,s=o.network,c=void 0===s?{}:s,i=l&&z()(n).call(n,l),u=c.plugin&&z()(a).call(a,c.plugin);if(i&&u)return r.props.action.setClusterInfo({version:l,network_plugin:c.plugin}),!0;ne.Z.error("版本或网络组件不匹配")}catch(e){ne.Z.error(e.message)}return!1})),(0,N.Z)((0,k.Z)(r),"validateTags",(function(e,t,n){(t.length>5&&n("最多输入5个标签"),Q()(t))&&(u()(t).call(t,(function(e){return!/^\S{1,32}$/.test(e)})).length&&n("单个标签不超过32位且不包含空格"));n()})),r}return(0,w.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.location,t=j.Z.getParamsFromUrl(e.search||""),n=t.type,r=t.mode;"kubernetes"===n&&0==+r&&this.getKubernetesAvaliable(r)}},{key:"render",value:function(){var e=this.state,t=e.versions,n=void 0===t?[]:t,r=e.networkPlugins,a=void 0===r?[]:r,o=e.advancedMode,l=this.props,s=l.isEdit,c=l.form,i=l.clusterInfo,u=void 0===i?{}:i,d=c.getFieldDecorator,p="kubernetes"===u.type&&0===u.mode;return G.createElement(X.Z,{"data-testid":"ec-step-one"},G.createElement("p",{className:"c-title__color"},"基础信息"),G.createElement("div",{className:"mt-20"},G.createElement(se,(0,b.Z)({label:"集群名称"},ue),d("name",{initialValue:s?u.name:"",rules:[{required:!0,message:"集群名称不可为空"},{pattern:/^[A-Za-z0-9_]{1,64}$/,message:"只支持字母、数字、下划线字符，最大长度不超过64"}]})(G.createElement(ee.Z,{placeholder:"请输入集群名称"}))),G.createElement(se,(0,b.Z)({label:"集群描述"},ue),d("desc",{initialValue:s?u.desc:"",rules:[{min:1,max:200,message:"请输入集群描述，最大长度不超过200"}]})(G.createElement(ce,{rows:4,placeholder:"请输入集群描述"}))),G.createElement(se,(0,b.Z)({label:"集群标签"},ue),d("tags",{initialValue:s&&u.tags?u.tags.split(","):[],rules:[{validator:this.validateTags}]})(G.createElement(te.Z,{mode:"tags",style:{width:"100%"},placeholder:"请输入集群标签，按回车键输入下一个标签，最多5个标签"}))),G.createElement(se,{style:{display:"none"}},d("id",{initialValue:s?u.id:void 0})(G.createElement(ee.Z,null)))),p&&G.createElement(G.Fragment,null,G.createElement("p",{className:"c-title__color clearfix"},G.createElement("span",null,"Kubernetes选项"),G.createElement("a",{"data-testid":"btn-mode-change",className:"fl-r mr-20",onClick:this.handleModeClick},o?"表单输入":"编辑YMAL")),G.createElement("div",{className:"mt-20 mb-20"},o?G.createElement(oe.Z,{yaml:u.yaml,onChange:this.handleYamlChange}):G.createElement(G.Fragment,null,G.createElement(se,(0,b.Z)({label:"Kubernetes版本"},ue),d("version",{initialValue:s?u.version:n[0],rules:[{required:!0,message:"请选择Kubernetes版本"}]})(G.createElement(te.Z,{placeholder:"请选择Kubernetes版本",onChange:this.handleVersionChange},V()(n).call(n,(function(e){return G.createElement(ie,{key:e,value:e},e)}))))),G.createElement(se,(0,b.Z)({label:"网络组件"},ue),d("network_plugin",{initialValue:s?u.network_plugin:a[0],rules:[{required:!0,message:"请选择网络组件"}]})(G.createElement(te.Z,{placeholder:"请选择网络组件",onChange:this.handlePluginChange},V()(a).call(a,(function(e){return G.createElement(ie,{key:e,value:e},e)})))))))))}}]),n}(G.PureComponent);const pe=X.Z.create()(de);var fe=n(15124),me=n(27049),he=n(60331);function ve(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,x.Z)(e);if(t){var o=(0,x.Z)(this).constructor;n=a()(r,arguments,o)}else n=r.apply(this,arguments);return(0,I.Z)(this,n)}}var ge=function(e){(0,S.Z)(n,e);var t=ve(n);function n(){var e,r;(0,C.Z)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return r=t.call.apply(t,R()(e=[this]).call(e,o)),(0,N.Z)((0,k.Z)(r),"state",{data:{secure:"",insecure:"",secure_v1beta1:"",insecure_v1beta1:""}}),r}return(0,w.Z)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=this.props.clusterInfo;re.TN.getKubernetesInstallCmd({cluster_id:t.id,cluster_name:t.name}).then((function(t){0===(t=t.data).code?e.setState({data:t.data}):ne.Z.error(t.msg)}))}},{key:"render",value:function(){var e=this.state.data;return G.createElement("div",{className:"cluster-cmd-page"},G.createElement(Ze,{version:">=1.16",secure:e.secure,insecure:e.insecure}),G.createElement(me.Z,{dashed:!0,style:{margin:"20px 0"}}),G.createElement(Ze,{version:"1.12-1.15",secure:e.secure_v1beta1,insecure:e.insecure_v1beta1}))}}]),n}(G.PureComponent),Ze=function(e){var t,n,r,a=e.version,o=e.secure,l=e.insecure,s="J_CMDCode"+(">=1.16"===a?"":"_v1beta1"),c=["Kubernetes 版本".concat(a,"，运行下面的kubectl命令将其导入到ChengYing："),"如果因为ChengYing使用不受信任 / 自签名的SSL证书而出现“由未知颁发机构签名的证书”错误，请运行下面的命令以绕过证书检查："];return G.createElement("div",null,G.createElement("p",null,"Kubernetes 版本 ",G.createElement(he.Z,{style:{color:"#3f87ff",background:"#f0f8ff",borderColor:"#3f87ff",borderRadius:"11px"}},a),"，运行下面的kubectl命令将其导入到ChengYing："),G.createElement("p",{className:"code-content mb-20"},o),G.createElement("p",null,c[1]),G.createElement("p",{className:"code-content"},l),G.createElement(G.Fragment,null,G.createElement(ee.Z.TextArea,{id:s,style:{opacity:0,height:12,minHeight:20},value:R()(t=R()(n=R()(r="".concat(c[0],"\n")).call(r,o,"\n")).call(n,c[1],"\n")).call(t,l)}),G.createElement(A.Z,{type:"default",id:"J_CopyBtn","data-clipboard-action":"cut","data-clipboard-target":"#".concat(s)},"复制命令")))};function ye(e,t){var n=l()(e);if(c()){var r=c()(e);t&&(r=u()(r).call(r,(function(t){return p()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?m()(n=ye(Object(a),!0)).call(n,(function(t){(0,N.Z)(e,t,a[t])})):v()?Z()(e,v()(a)):m()(r=ye(Object(a))).call(r,(function(t){E()(e,t,p()(a,t))}))}return e}function be(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,x.Z)(e);if(t){var o=(0,x.Z)(this).constructor;n=a()(r,arguments,o)}else n=r.apply(this,arguments);return(0,I.Z)(this,n)}}var _e,Ce=function(e){(0,S.Z)(n,e);var t=be(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n,[{key:"render",value:function(){var e=this.props.clusterInfo,t=Ee(Ee({},this.props),{},{clusterInfo:e});return G.createElement("div",{"data-testid":"ec-step-final"},"kubernetes"===e.type&&1===e.mode?G.createElement(ge,{clusterInfo:e}):G.createElement(G.Fragment,null,G.createElement("p",{className:"c-title__color"},"选择主机"),G.createElement(fe.default,t)))}}]),n}(G.PureComponent);function we(e,t){var n=l()(e);if(c()){var r=c()(e);t&&(r=u()(r).call(r,(function(t){return p()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?m()(n=we(Object(a),!0)).call(n,(function(t){(0,N.Z)(e,t,a[t])})):v()?Z()(e,v()(a)):m()(r=we(Object(a))).call(r,(function(t){E()(e,t,p()(a,t))}))}return e}function Se(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,x.Z)(e);if(t){var o=(0,x.Z)(this).constructor;n=a()(r,arguments,o)}else n=r.apply(this,arguments);return(0,I.Z)(this,n)}}var Ie={hosts:["主机集群"],kubernetes:["自建Kubernetes集群","导入已有Kubernetes集群"]},xe=(0,F.$j)((function(e){return{clusterInfo:e.editClusterStore.clusterInfo}}),(function(e){return{actions:(0,L.DE)(K()({},T,q),e)}}))(_e=function(e){(0,S.Z)(n,e);var t=Se(n);function n(e){var r;return(0,C.Z)(this,n),r=t.call(this,e),(0,N.Z)((0,k.Z)(r),"stepOneForm",null),(0,N.Z)((0,k.Z)(r),"fetchClusterInfo",(function(e,t){re.TN.getClusterInfo({cluster_id:e},t).then((function(e){0===(e=e.data).code&&r.props.actions.setClusterInfo(ke({},e.data))}))})),(0,N.Z)((0,k.Z)(r),"handleNextStep",(function(){var e=r.props,t=e.location,n=e.clusterInfo,a=n.type,o=n.mode,l=n.yaml,s=r.state.isEdit;r.stepOneForm.props.form.validateFields(function(){var e=(0,_.Z)(M().mark((function e(n,c){var i,u;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=10;break}if(c.tags=c.tags.join(","),i=function(){var e,n,l,s=r.state.step+1;r.setState({step:s}),window.history.pushState({},"0",t.pathname+R()(e=R()(n=R()(l="?id=".concat(r.props.clusterInfo.id,"&type=")).call(l,a,"&mode=")).call(n,o,"&step=")).call(e,s))},u=!0,"kubernetes"!==a||0!==o){e.next=9;break}if(l){e.next=8;break}return e.next=8,r.props.actions.getTemplate(K()({},r.props.clusterInfo,c));case 8:u=r.stepOneForm.validateYaml();case 9:u&&r.props.actions.clusterSumbmitOperate(K()({},r.props.clusterInfo,c),s,i);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())})),(0,N.Z)((0,k.Z)(r),"handleSubmit",(function(){var e=r.props.location.search.split("from=")[1]||"/deploycenter/cluster/list";j.Z.setNaviKey("sub_menu_cluster_edit","sub_menu_cluster_list"),r.props.history.push(e)})),(0,N.Z)((0,k.Z)(r),"handleCancel",(function(){var e=r.state.isEdit,t=r.props.location.search.split("from=")[1]||"/deploycenter/cluster".concat(e?"/list":"/create");r.props.history.push(t)})),r.state={step:1,isEdit:!1},r.props.actions.resetClusterInfo(),r}return(0,w.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.match.params,r=j.Z.getParamsFromUrl(t.search||""),a=r.id,o=r.type,l=r.mode,s=r.step,c="edit"===n.type;this.props.actions.setClusterInfo({id:+a,type:o,mode:+l}),c&&this.fetchClusterInfo(a,o),this.setState({isEdit:c,step:s||1})}},{key:"componentWillUnmount",value:function(){this.props.actions.resetHostList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.step,r=t.isEdit,a=this.props.clusterInfo,o=ke(ke({},this.props),{},{action:this.props.actions,isEdit:r,handleCancel:this.handleCancel});return G.createElement("div",{className:"cluster-container"},G.createElement(O.Z,{className:"nav-link text-title-bold",to:this.props.location.search.split("from=")[1]||"/deploycenter/cluster".concat(r?"/list":"/create")},G.createElement(B.Z,{type:"left",style:{marginRight:5}}),r?"编辑":"添加","集群（",Ie[a.type][a.mode],"）"),G.createElement("div",{className:"edit-cluster-container"},1===n?G.createElement(pe,(0,b.Z)({},o,{wrappedComponentRef:function(t){return e.stepOneForm=t}})):G.createElement(Ce,o),G.createElement("div",{className:"edit-cluster-bottom"},1===n?G.createElement(G.Fragment,null,G.createElement(A.Z,{type:"default",className:"mr-10",onClick:this.handleCancel},"取消"),G.createElement(A.Z,{type:"primary",onClick:this.handleNextStep},"下一步")):G.createElement(A.Z,{type:"primary",onClick:this.handleSubmit},"完成"))))}}]),n}(G.PureComponent))||_e},8386:(e,t,n)=>{n.d(t,{Z:()=>N});var r=n(71649),a=n(95266),o=n(24282),l=n.n(o),s=n(28222),c=n.n(s),i=n(39022),u=n.n(i),d=n(63460),p=n.n(d),f=n(67294),m=n(45360),h=n(77268),v=n(30258),g=n(11382),Z=n(14277),y=n(74981),E=(n(44576),n(68886),n(40049),n(69604)),b=n(30381),_=n.n(b),C=n(36808),w=n(96486),k=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=l()(n=c()(r)).call(n,(function(e,t){var n,a;return u()(n=u()(a="".concat(e)).call(a,t,"=")).call(n,r[t],"&")}),"".concat(e,"?")).replace(/&$/,"");fetch(a).then((function(e){return e.blob()})).then((function(e){var n=p().createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,r.click(),p().revokeObjectURL(r.href)})).catch((function(e){m.Z.error(e.message)}))},S=function(e){var t=e.title,n=e.visible,r=e.type,a=e.onColse,o=e.execId,l=e.showFooter,s=void 0===l||l,c=f.useRef(null),i=f.useCallback((function(e){var t=e.type,n=e.payload;switch(t){case"log":k("/api/v2/cluster/downLoadShellLog","".concat(o,"-shell.log"),n);break;case"echo":k("/api/v2/cluster/downLoadShellContent","".concat(o,"-content.sh"),n)}}),[]),u="echo"===r?f.createElement(h.Z,{type:"primary",disabled:!o,onClick:w.debounce((function(){return i({type:"echo",payload:{execId:o}})}),200)},"下载完整脚本"):f.createElement(h.Z,{type:"primary",disabled:!o,onClick:w.debounce((function(){i({type:"log",payload:{clusterId:C.get("em_current_cluster_id"),execId:o}})}),200)},"下载完整日志");return f.createElement(v.Z,{className:"code-view-modal",width:"echo"===r?520:1050,title:t,visible:n,footer:s?u:null,onCancel:function(e){c.current&&c.current.wsClose(),a()}},"echo"===r?f.createElement(I,{execId:o}):f.createElement(x,{execId:o,cref:c}))},I=function(e){var t=e.execId,n=f.useState(""),r=(0,a.Z)(n,2),o=r[0],l=r[1];return f.useEffect((function(){t&&function(e){E.Z.showShellContent({execId:e}).then((function(e){var t=e.data,n=t.data,r=t.code,a=t.msg;if(0===r)return l(n);m.Z.error(a)})).catch((function(e){m.Z.error(e.message)}))}(t)}),[t]),f.createElement(y.ZP,{className:"ace-code-portal",mode:"golang",theme:"kuroir",value:o,readOnly:!0,width:"400px",height:"100%",showGutter:!1})},x=function(e){var t=e.execId,n=e.cref,o=f.useState([]),l=(0,a.Z)(o,2),s=l[0],c=l[1],i=f.useState(!1),d=(0,a.Z)(i,2),p=d[0],m=d[1],h=f.useRef(null);f.useImperativeHandle(n,(function(){return{wsClose:function(){h.current&&h.current.close(),h.current=null}}}));f.useEffect((function(){if(t)try{var e,n;h.current=new WebSocket(u()(e=u()(n="ws://".concat(window.location.hostname,":")).call(n,window.location.port,"/api/v2/cluster/showShellLog?execId=")).call(e,t)),h.current.onmessage=function(e){c((function(t){var n;return u()(n=[]).call(n,(0,r.Z)(t),[{time:"[".concat(_()().format("hh:mm:ss"),"]"),message:e.data}])})),m(!1)},h.current.onopen=function(e){m(!0)},h.current.onerror=function(e){m(!1)},h.current.onclose=function(){m(!1)}}catch(e){m(!1)}}),[t]);return f.createElement(g.Z,{spinning:p},s.length?f.createElement("div",{className:"log-info"},f.createElement("ul",{dangerouslySetInnerHTML:{__html:function(e){var t="";for(var n in e){t+="\n        <li>\n          <pre>".concat(e[n].message,"</pre>\n        </li>\n      ")}return t}(s)}})):f.createElement(Z.Z,null))};const N=f.memo(S,(function(e,t){return e.execId===t.execId}))},15124:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ne});var r=n(28760),a=n.n(r),o=n(80222),l=n.n(o),s=n(14418),c=n.n(s),i=n(8446),u=n.n(i),d=n(66870),p=n.n(d),f=n(29747),m=n.n(f),h=n(96718),v=n.n(h),g=n(73126),Z=n(68420),y=n(27344),E=n(5281),b=n(84441),_=n(3020),C=n(3362),w=n(44845),k=n(76986),S=n.n(k),I=n(87198),x=n.n(I),N=n(86),P=n.n(N),M=n(24278),H=n.n(M),K=n(58118),D=n.n(K),R=n(39022),G=n.n(R),O=n(28222),F=n.n(O),L=n(97606),T=n.n(L),q=n(51679),B=n.n(q),A=n(58309),j=n.n(A),U=n(67294),V=n(97779),Y=n(29027),$=n(43663),W=n(64158),z=n(94184),J=n.n(z),Q=n(34041),X=n(4107),ee=n(24105),te=n(69035),ne=n(30258),re=n(67908),ae=n(45360),oe=n(55241),le=n(31097),se=n(45334),ce=n(60331),ie=n(77268),ue=n(37870),de=n(8263),pe=n(14277),fe=n(4243),me=n(87155),he=n(19331);function ve(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,C.Z)(e);if(t){var o=(0,C.Z)(this).constructor;n=a()(r,arguments,o)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}const ge=function(e){(0,b.Z)(n,e);var t=ve(n);function n(){var e,r;(0,Z.Z)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return r=t.call.apply(t,G()(e=[this]).call(e,o)),(0,w.Z)((0,E.Z)(r),"state",{value:r.props.value,editable:!1}),(0,w.Z)((0,E.Z)(r),"handleChange",(function(e){var t=e.target.value;r.setState({value:t})})),(0,w.Z)((0,E.Z)(r),"successClose",(function(){return function(){r.setState({editable:!1})}})),(0,w.Z)((0,E.Z)(r),"check",(function(){var e;r.props.onChange&&(""===(e=r.state.value)?(ae.Z.error("分组名称不可为空！"),0):e.length>20?(ae.Z.error("分组名称不得超过20字符"),0):/^[a-zA-Z0-9_@*#/]+$/.test(e)||(ae.Z.error("分组名称输入有误，请重新输入！"),0))&&r.props.onChange(r.state.value,r.successClose())})),(0,w.Z)((0,E.Z)(r),"close",(function(){r.setState({editable:!1,value:r.props.value})})),(0,w.Z)((0,E.Z)(r),"edit",(function(){r.setState({editable:!0})})),r}return(0,y.Z)(n,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.editable;return U.createElement("div",{className:"editable-cell"},n?U.createElement("div",{className:"editable-cell-input-wrapper"},U.createElement(X.Z,{value:t,style:{width:"350px",fontSize:"12px"},placeholder:"只支持字母、数字及_ / @ * #特殊字符，不超过20个字符",onChange:this.handleChange,onPressEnter:this.check}),U.createElement(re.Z,{type:"check",className:"editable-cell-icon-check",onClick:this.check}),U.createElement(re.Z,{type:"close",className:"editable-cell-icon-close",onClick:this.close})):this.props.isShowEditIcon?U.createElement("div",{className:"editable-cell-text-wrapper"},t||" ",U.createElement(re.Z,{type:"edit",className:"editable-cell-icon",onClick:this.edit})):null)}}]),n}(U.Component);var Ze,ye=n(187),Ee=n(8386);function be(e,t){var n=F()(e);if(l()){var r=l()(e);t&&(r=c()(r).call(r,(function(t){return u()(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?P()(n=be(Object(a),!0)).call(n,(function(t){(0,w.Z)(e,t,a[t])})):p()?m()(e,p()(a)):P()(r=be(Object(a))).call(r,(function(t){v()(e,t,u()(a,t))}))}return e}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,C.Z)(e);if(t){var o=(0,C.Z)(this).constructor;n=a()(r,arguments,o)}else n=r.apply(this,arguments);return(0,_.Z)(this,n)}}var we=Q.Z.Option,ke=X.Z.Search,Se=ee.Z.Panel,Ie=te.Z.Item,xe=(0,Y.$j)((function(e){return{filterSelectedItem:e.HostStore.filterSelectedItem,filterData:e.HostStore.filterData,selectRows:e.HostStore.selectRows,searchValue:e.HostStore.searchValue,clusterHostList:e.HostStore.clusterHostList,pager:e.HostStore.pager,clusterHostGroupList:e.HostStore.clusterHostGroupList}}),(function(e){return{actions:(0,V.DE)(S()({},W),e)}}))(Ze=function(e){(0,b.Z)(n,e);var t=Ce(n);function n(e){var r;return(0,Z.Z)(this,n),r=t.call(this,e),(0,w.Z)((0,E.Z)(r),"state",{addedHost:null,queryParams:{"sort-by":"id","sort-dir":"desc",q_host:"",hostGroupName:"",limit:10,start:0,currentPage:1,is_running:[],status:[],roles:""},aHostDetail:{status:"",status_msg:""},showModal:!1,rootLink:["/deploycenter/cluster/list","/deploycenter/appmanage/products","/installguide","/deploycenter/appmanage/installs"],activeKey:"",selectedRowKeys:[],selectedRows:[],hostMoveModal:!1,isNewGroup:!1,tableLoading:!1,clusterHostList:[],visibleInfo:{visible:!1,title:"日志查看",type:"log",execId:""},total:0}),(0,w.Z)((0,E.Z)(r),"timer",null),(0,w.Z)((0,E.Z)(r),"progressProp",(function(e){var t=r.props.clusterInfo,n=void 0===t?{}:t;switch(e){case 0:return{percent:0,title:"等待安装",color:"host-status-wait-install"};case-1:return{percent:30,status:"exception",title:"管控安装失败",color:"red-dot dot"};case 1:return{percent:30,status:"active",title:"管控安装成功",color:"green-dot dot"};case-2:return{percent:"hosts"===n.type?60:40,status:"exception",title:"script安装失败",color:"red-dot dot"};case 2:return{percent:"hosts"===n.type?60:40,status:"active",title:"script安装成功",color:"green-dot dot"};case-3:return{percent:"hosts"===n.type?100:50,status:"exception",title:"主机初始化失败",color:"red-dot dot"};case 3:return{percent:"hosts"===n.type?100:50,status:"hosts"===n.type?"success":"active",title:"主机初始化成功",color:"green-dot dot"};case-4:return{percent:50,status:"exception",title:"主机下线",color:"red-dot dot"};case-5:return{percent:60,status:"exception",title:"K8S DOCKER初始化失败",color:"red-dot dot"};case 5:return{percent:60,status:"active",title:"K8S DOCKER初始化成功",color:"green-dot dot"};case-6:return{percent:80,status:"exception",title:"K8S NODE初始化失败",color:"red-dot dot"};case 6:return{percent:80,status:"active",title:"K8S NODE初始化成功",color:"green-dot dot"};case-7:return{percent:100,status:"exception",title:"K8S NODE部署失败",color:"red-dot dot"};case 7:return{percent:100,status:"success",title:"K8S NODE部署成功",color:"green-dot dot"};default:return{percent:100,status:"exception"}}})),(0,w.Z)((0,E.Z)(r),"handleSearchByHost",(function(e){var t=r.state.queryParams;r.setState({selectedRowKeys:[],queryParams:S()(t,{q_host:e,start:0,currentPage:1})},(function(){r.getHostGroups(),r.loadData()}))})),(0,w.Z)((0,E.Z)(r),"loadData",(function(){var e=r.props.clusterInfo,t=r.state.queryParams;r.setState({tableLoading:!0});var n=null!=t&&t.is_running.length?null==t?void 0:t.is_running.join(","):"",a=null!=t&&t.status.length?null==t?void 0:t.status.join(","):"";r.props.actions.getClusterHostList({"sort-by":t["sort-by"],"sort-dir":t["sort-dir"],limit:t.limit,start:t.start,host_or_ip:t.q_host,is_running:n,status:a,group:t.hostGroupName,cluster_id:null==e?void 0:e.id,cluster_type:null==e?void 0:e.type,role:"hosts"===(null==e?void 0:e.type)?void 0:t.roles},(function(e){var t=e.hosts,n=e.count;r.setState({clusterHostList:t,total:n,tableLoading:!1},(function(){clearTimeout(r.timer),r.timer=x()((function(){r.loadData(),r.getHostGroups()}),3e3)}))}))})),(0,w.Z)((0,E.Z)(r),"getHostGroups",(function(){var e=r.props.clusterInfo,t=void 0===e?{}:e;r.props.actions.getClusterhostGroupLists({type:t.type,id:t.id})})),(0,w.Z)((0,E.Z)(r),"goToAdd",(function(){r.setState({showModal:!0})})),(0,w.Z)((0,E.Z)(r),"afterHostInstall",(function(){r.setState({showModal:!1}),r.loadData()})),(0,w.Z)((0,E.Z)(r),"hostDelete",(function(){var e=r.state.selectedRows,t=[];P()(e).call(e,(function(e){e.is_running||t.push(e.id)}));var n={aid:t};t.length>0?ne.Z.confirm({title:"只可下架agent已停止的主机，确定下架这些主机吗？",content:"主机下架将会将主机上的数据库信息、服务信息清除掉，请谨慎操作！",icon:U.createElement(re.Z,{type:"exclamation-circle",theme:"filled"}),okText:"确定",cancelText:"取消",onCancel:function(){},onOk:function(){$.$b.deleteHost(n).then((function(e){var t=e.data;0===t.code?(ae.Z.success("下架成功！"),r.getHostGroups(),r.loadData()):ae.Z.error(t.msg)}))}}):ne.Z.confirm({title:"当前无agent停止的主机，不支持下架",icon:U.createElement(re.Z,{type:"exclamation-circle",theme:"filled"}),okText:"确定"})})),(0,w.Z)((0,E.Z)(r),"handleEvent",(function(e){var t=r.state.visibleInfo;r.setState({visibleInfo:_e(_e({},t),{},{visible:!t.visible,execId:e?e.exec_id:""})})})),(0,w.Z)((0,E.Z)(r),"initColumns",(function(){var e,t=r.props.clusterInfo,n=r.state.queryParams,a=fe.RI[t.type],o=[{title:"主机IP",dataIndex:"ip",key:"ip",sorter:!0,width:150,fixed:"left"},{title:"主机名称",dataIndex:"hostname",key:"hostname",render:function(e,t){return U.createElement(oe.Z,{content:U.createElement("span",null,"sid:",t.sid)},e)}},{title:"最近心跳时间",dataIndex:"updated",key:"updated",sorter:!0},{title:"主机创建时间",dataIndex:"created",key:"created",sorter:!0},{title:"启动用户",dataIndex:"run_user",key:"run_user",render:function(e){return U.createElement(le.Z,{placement:"right",title:e},e&&e.length>12?H()(e).call(e,0,13)+"...":e)}},{title:"agent状态",dataIndex:"is_running",key:"is_running",width:150,filters:[{text:"运行中",value:"true"},{text:"已停止",value:"false"}],filteredValue:null==n?void 0:n.is_running,filterMultiple:!0,render:function(e){var t=e?"green-dot dot":"red-dot dot";return U.createElement("span",{className:"status-box"},U.createElement("span",{className:t}),U.createElement("span",null,e?"运行中":"已停止"))}},{title:U.createElement("span",null,"初始化状态"," ",U.createElement(le.Z,{title:a.title},U.createElement(re.Z,{type:"info-circle"}))),dataIndex:"errorMsg",key:"errorMsg",filters:a.filters,filteredValue:null==n?void 0:n.status,filterMultiple:!0,render:function(e,t){var n,o=a.finalStatus;return U.createElement("span",null,D()(n=[-3,-2,-1,-4,-5,-6,-7,o]).call(n,t.status)&&U.createElement("span",{className:"status-box"},U.createElement("span",{className:r.progressProp(t.status).color}),U.createElement("span",null,r.progressProp(t.status).title),t.status!==o&&U.createElement(le.Z,{title:t.errorMsg}," ",U.createElement(re.Z,{type:"info-circle"})))||U.createElement(se.Z,(0,g.Z)({className:"status-progress",style:{width:"80%"},format:function(e){var n;return G()(n="".concat(e,"% ")).call(n,t.errorMsg)}},r.progressProp(t.status))))}},{title:"查看",render:function(e,t){return U.createElement("a",{onClick:function(e){return r.handleEvent(t)}},"日志")}}],l=[{title:"主机角色",dataIndex:"roles",width:250,filters:[{text:"Etcd",value:"Etcd"},{text:"Control",value:"Control"},{text:"Worker",value:"Worker"},{text:"全部",value:"all"}],render:function(e,t){var n=F()(t.roles||{});return T()(n).call(n,(function(e){return t.roles[e]&&U.createElement(ce.Z,{className:"c-cluster__tag",key:e},e)}))}}];return"hosts"===t.type?o:G()(e=[]).call(e,o,l)})),(0,w.Z)((0,E.Z)(r),"onCellChange",(function(e){return function(t,n){var a,o=B()(a=r.props.clusterHostGroupList).call(a,(function(t){return t===e}));$.$b.updateGroupName({old:o,new:t}).then((function(e){0===e.data.code?(ae.Z.success("分组名称修改成功"),n(),r.setState({queryParams:S()(r.state.queryParams,{hostGroupName:t}),activeKey:t},(function(){r.getHostGroups(),r.loadData()}))):ae.Z.error(e.data.msg)}))}})),(0,w.Z)((0,E.Z)(r),"tableFooter",(function(e){return U.createElement("div",null,U.createElement(ie.Z,{className:"mr-10",onClick:r.clickMoveHost,icon:"swap"},"移动到"),U.createElement(ie.Z,{type:"danger",className:"btn_dele",onClick:r.hostDelete,icon:"delete"},"下架"))})),(0,w.Z)((0,E.Z)(r),"clickMoveHost",(function(){r.setState({hostMoveModal:!0})})),(0,w.Z)((0,E.Z)(r),"checkGroupName",(function(e){return""===e?(ae.Z.error("分组名称不可为空！"),!1):e.length>20?(ae.Z.error("分组名称不得超过20字符"),!1):!!/^[a-zA-Z0-9_@*#/]+$/.test(e)||(ae.Z.error("分组名称输入有误，请重新输入！"),!1)})),(0,w.Z)((0,E.Z)(r),"confirmMove",(function(){var e=r.state,t=e.selectedRowKeys,n=e.queryParams,a=r.props.form.getFieldValue("name");r.props.form.validateFields((function(e){!e&&r.checkGroupName(a)&&$.$b.confirmMoveHost({aid:t,to_group:a}).then((function(e){0===e.data.code?(ae.Z.success("移动分组成功"),r.props.form.resetFields(),r.setState({hostMoveModal:!1,isNewGroup:!1,activeKey:a,selectedRowKeys:[],queryParams:S()(n,{hostGroupName:a})},(function(){r.getHostGroups(),r.loadData()}))):ae.Z.error(e.data.msg)}))}))})),(0,w.Z)((0,E.Z)(r),"refresh",(function(e){r.setState({queryParams:S()(r.state.queryParams,{hostGroupName:e}),activeKey:e},(function(){r.loadData()}))})),(0,w.Z)((0,E.Z)(r),"handleClickPanel",(function(e){var t=r.state.queryParams;r.setState({selectedRowKeys:[],queryParams:S()(t,{"sort-by":"id","sort-dir":"desc",q_host:"",hostGroupName:e,limit:10,start:0,currentPage:1,is_running:"",status:"",roles:""}),activeKey:e},(function(){r.loadData()}))})),(0,w.Z)((0,E.Z)(r),"onSelectChange",(function(e,t){r.setState({selectedRowKeys:e,selectedRows:t})})),(0,w.Z)((0,E.Z)(r),"onTableChange",(function(e,t,n){var a=r.props.clusterInfo,o=S()(r.state.queryParams,{start:10*(e.current-1),currentPage:e.current});if(n){var l=n.field,s=n.order;switch(l){case"ip":o["sort-by"]="ip",o["sort-dir"]="descend"===s?"desc":"asc";break;case"updated":o["sort-by"]="updated",o["sort-dir"]="descend"===s?"desc":"asc";break;case"created":o["sort-by"]="created",o["sort-dir"]="descend"===s?"desc":"asc"}}F()(t).length&&(o.is_running=t.is_running||[],o.status=t.errorMsg||[],o.roles="hosts"===a.type?void 0:(t.roles||[]).join(",")),r.setState({queryParams:o,selectedRowKeys:[]},(function(){r.loadData()}))})),(0,w.Z)((0,E.Z)(r),"handleChangeGroup",(function(e){var t=r.props.form.setFieldsValue;"NEWGROUP"===e&&r.setState({isNewGroup:!0},(function(){t({name:""})}))})),r}return(0,y.Z)(n,[{key:"componentDidMount",value:function(){this.loadData(),this.getHostGroups()}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.clusterHostGroupList;if(""===this.state.activeKey&&j()(t)&&t.length){var n=this.props.clusterHostGroupList[0]||"";this.setState({activeKey:n,queryParams:S()(this.state.queryParams,{hostGroupName:n})},(function(){e.loadData(),e.getHostGroups()}))}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.clusterHostGroupList,a=n.clusterInfo,o=this.state,l=o.selectedRowKeys,s=o.queryParams,c=o.isNewGroup,i=o.clusterHostList,u=o.visibleInfo,d=this.props.form.getFieldDecorator,p=l.length>0,f={selectedRowKeys:l,onChange:this.onSelectChange},m={size:"small",current:s.currentPage,pageSize:10,total:this.state.total};return U.createElement("div",{className:"host-page"},U.createElement("div",{className:"host-option"},U.createElement(ke,{placeholder:"按主机IP或名称搜索",style:{width:264},onSearch:this.handleSearchByHost}),U.createElement(ie.Z,{type:"primary",style:{float:"right"},onClick:this.goToAdd},"添加主机")),p?U.createElement(ue.Z,{type:"info",showIcon:!0,message:"已选择".concat(l.length,"项")}):null,j()(r)&&r.length?U.createElement(U.Fragment,null,U.createElement(ee.Z,{className:"host-collapse",activeKey:this.state.activeKey,accordion:!0,onChange:this.handleClickPanel,style:{borderRadius:"0",marginTop:"8px"}},T()(r).call(r,(function(e){return U.createElement(Se,{style:{borderRadius:"0"},header:U.createElement("div",{onClick:function(e){e.stopPropagation()},className:"panel-table"},U.createElement(de.Z,{rowKey:function(e,t){return t+""},showHeader:!1,className:"select-table",bordered:!1,pagination:!1,dataSource:[{name:e}],columns:[{title:"name",dataIndex:"name",render:function(e,n){return U.createElement(ge,{isShowEditIcon:!0,value:e,onChange:t.onCellChange(e)})}}]})),key:"".concat(e)},U.createElement(de.Z,{rowKey:"id",size:"middle",className:J()("dt-pagination-lower",{"has-footer":p}),columns:t.initColumns(),dataSource:i,rowSelection:f,onChange:t.onTableChange,pagination:m,footer:p?t.tableFooter:null,loading:t.state.tableLoading}))}))),"kubernetes"===a.type&&U.createElement(he.Z,{wsUrl:G()(e="ws://".concat(window.location.host,"/api/v2/cluster/kubernetes/")).call(e,a.id,"/installLog")})):U.createElement(pe.Z,{style:{marginTop:"10%"}}),U.createElement(ne.Z,{destroyOnClose:!0,visible:this.state.showModal,title:"添加主机",onCancel:function(){t.setState({showModal:!1})},footer:null},U.createElement(me.Z,{afterInstall:this.afterHostInstall,refresh:this.refresh,clusterInfo:a,onCancel:function(){t.setState({showModal:!1})}})),U.createElement(ne.Z,{visible:this.state.hostMoveModal,width:"650px",title:"移动主机至",onCancel:function(){t.props.form.resetFields(),t.setState({hostMoveModal:!1,isNewGroup:!1})},onOk:this.confirmMove},U.createElement(te.Z,null,U.createElement(Ie,(0,g.Z)({},ye.v,{label:"主机分组"}),d("name",{rules:[{required:!0,message:"请选择或输入主机分组"}]})(c?U.createElement(X.Z,{placeholder:"请输入新建分组名称",style:{minWidth:200}}):U.createElement(Q.Z,{placeholder:"请选择主机分组",style:{minWidth:200},onChange:this.handleChangeGroup},U.createElement(we,{value:"NEWGROUP"},"新建分组"),r&&T()(r).call(r,(function(e){return U.createElement(we,{value:e,key:e},e)}))))))),u.visible&&U.createElement(Ee.Z,(0,g.Z)({},u,{onColse:this.handleEvent})))}}]),n}(U.Component))||Ze;const Ne=te.Z.create()(xe)},72536:(e,t,n)=>{n.d(t,{ON:()=>s,g8:()=>l});var r=n(49754),a=n(35558),o=n(98130);function l(e,t){if(!t)return e;var n=new r.Z;return n.setPublicKey(t),(0,a.GV)(n.encrypt(e)||"")}function s(e,t){return"04"+o.sg.encrypt(e,t,{inputEncoding:"utf8",outputEncoding:"hex"})}},82193:(e,t,n)=>{n.d(t,{Z:()=>Z});var r=n(39022),a=n.n(r),o=n(86),l=n.n(o),s=n(11882),c=n.n(s),i=n(97606),u=n.n(i),d=n(28222),p=n.n(d),f=n(2357),m=n.n(f),h=n(45360),v=n(36808),g=n(4243);const Z={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)},percent:function(e,t){return e&&e!==1/0?(e>1&&(e=1),t=t||2,t=Math.pow(10,t),Math.round(e*t*100)/t+"%"):"0%"},getCssText:function(e){var t="";for(var n in e)t+=n+":"+e[n]+";";return t},formateDateTime:function(e){var t,n,r,o,l;if(!e)return"";var s=new Date(e),c=s.getFullYear(),i=s.getMonth()+1+"",u=s.getDate()+"",d=s.getHours()+"",p=s.getMinutes()+"",f=s.getSeconds()+"";return 1===i.toString().length&&(i="0".concat(i)),1===u.toString().length&&(u="0".concat(u)),1===d.toString().length&&(d="0".concat(d)),1===p.toString().length&&(p="0".concat(p)),1===f.toString().length&&(f="0".concat(f)),a()(t=a()(n=a()(r=a()(o=a()(l="".concat(c,"-")).call(l,i,"-")).call(o,u," ")).call(r,d,":")).call(n,p,":")).call(t,f)},formateDate:function(e){var t,n;if(!e)return"";var r=new Date(e),o=r.getFullYear(),l=r.getMonth()+1+"",s=r.getDate()+"";return 1===l.toString().length&&(l="0".concat(l)),1===s.toString().length&&(s="0".concat(s)),a()(t=a()(n="".concat(o,"-")).call(n,l,"-")).call(t,s)},trim:function(e){return"string"==typeof e?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},messageFilter:function(e,t,n,r){1001===e.status.code&&(r||h.Z.success("成功"),t&&t())},getTableParam:function(e){var t={};return l()(e).call(e,(function(e,n){var r=e.split("-");t[r[1]]=r[2]})),t},setAlertControl:function(e){var t={},n=e.alert_control;return"1"===n?t.close=1:(t.close=0,e["alert_num_"+n]&&(t.times_after_close=e["alert_num_"+n]),e["recover_num_"+n]&&(t.close_after_long_time_reset_amount=e["recover_num_"+n],t.close_after_long_time_reset_unit=e["recover_unit_"+n])),t},getAlertControl:function(e){var t={alert_control:""};return 0===e.close&&(0!==e.times_after_close?(t.alert_control="2",t["alert_num_"+t.alert_control]=e.times_after_close):t.alert_control="3",""!==e.close_after_long_time_reset_amount&&("2"===t.alert_control&&(t.alert_control="4"),t["alert_num_"+t.alert_control]=e.times_after_close,t["recover_num_"+t.alert_control]=e.close_after_long_time_reset_amount,t["recover_unit_"+t.alert_control]=e.close_after_long_time_reset_unit)),t},filterOption:function(e,t){var n;return-1!==c()(n=t.props.children).call(n,e)},getParamsFromUrl:function(e){var t={},n=[],r="",a="",o=e.substring(c()(e).call(e,"?")+1,e.length).split("&");for(var l in o)r=(n=o[l].split("="))[0],a=n[1],t[r]=a;return t},jsonToQuery:function(e){var t;return e?function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}(u()(t=p()(e)).call(t,(function(t){return void 0===e[t]?"":encodeURIComponent(t)+"="+encodeURIComponent(e[t])}))).join("&"):""},checkNullObj:function(e){return 0===p()(e).length},serviceCallback:function(e,t,n){0===e.data.code?(h.Z.success(t),n&&n()):h.Z.error(e.data.msg)},noAuthorityToDO:function(e,t){return!e[t]&&(h.Z.error("权限不足，请联系管理员!"),!0)},get k8sNamespace(){return v.get(g.E9.NAMESPACE)},setNaviKey:function(e,t){sessionStorage.setItem("firstLevelNav",e),sessionStorage.setItem("siderLevelNav",t)},formatGBUnit:function(e){return c()(e).call(e,"MB")>-1?m()(e.replace("MB",""))/1024:c()(e).call(e,"KB")>-1?m()(e.replace("KB",""))/1024/1024:c()(e).call(e,"GB")>-1?m()(e.replace("GB","")):c()(e).call(e,"TB")>-1?1024*m()(e.replace("TB","")):0}}}}]);