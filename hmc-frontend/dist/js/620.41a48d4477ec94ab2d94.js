"use strict";(self.webpackChunkHMC=self.webpackChunkHMC||[]).push([[620],{50620:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ye});var a=n(28760),l=n.n(a),r=n(68420),o=n(27344),i=n(5281),s=n(84441),c=n(3020),p=n(3362),d=n(44845),u=n(76986),h=n.n(u),f=n(97293),m=n.n(f),v=n(11189),y=n.n(v),g=n(97606),_=n.n(g),I=n(67294),E=n(27220),C=n(24105),S=n(45334),k=n(31097),Z=n(59314),x=n(77268),b=n(8263),w=n(37870),N=n(30258),P=n(29027),B=n(97779),M=n(80404),D=n(62158),U=n(40448),L=n(19623),R=n(28222),F=n.n(R),A=n(35627),T=n.n(A),O=n(4107),H=n(67908);function j(e){var t=function(){if("undefined"==typeof Reflect||!l())return!1;if(l().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=l()(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.Z)(this,n)}}var K=new RegExp("^[0-9]*$"),W=function(e){(0,s.Z)(n,e);var t=j(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={default_input_value:"",has_config_value:!1},a}return(0,o.Z)(n,[{key:"buildInstanceEditByNode",value:function(e,t,n){var a,l=this,r=t+1,o=null;return o=1===t?"node-item top-floor":"node-item",_()(a=F()(e)).call(a,(function(t,a){var i,s,c,p,d=n?n+"."+t:t,u=K.test(t);return"object"===(0,L.Z)(e[t])?I.createElement("li",{key:d,className:o},I.createElement("span",{className:"node-item-title"},t,": "),I.createElement("ul",{style:{display:"inline-block",verticalAlign:"top"}},l.buildInstanceEditByNode(e[t],r,d))):"MaxReplica"===t||"StartAfterInstall"===t?I.createElement("li",{key:d,className:o},I.createElement("span",{className:"node-item-title"},t,": "),I.createElement("span",null,e[t])):"UseCloud"!==t?I.createElement("li",{key:d,className:o},I.createElement("span",{className:"node-item-title",style:u?{display:"none"}:{display:"inline-block"}},t,":"," "),I.createElement(O.Z,{defaultValue:e[t],value:e[t],addonAfter:I.createElement(H.Z,{type:"reload",style:{fontSize:14},onClick:y()(i=l.handleReloadConfig).call(i,l,d)}),onChange:y()(s=l.handleInputChange).call(s,l,d,0),onFocus:y()(c=l.handleInputFocus).call(c,l,d),onBlur:y()(p=l.handleInputBlur).call(p,l,d)})):""}))}},{key:"buildConfigEditByNode",value:function(e,t){var n,a=this,l=!1,r=_()(n=F()(e)).call(n,(function(n,r){var o,i=t?t+"."+n:n;return _()(o=F()(e[n])).call(o,(function(t,r){var o,s,c,p,d=i+"."+t;return"Value"===t&&"string"==typeof e[n][t]?(l=!0,I.createElement("li",{key:d,className:"node-item top-floor"},I.createElement("span",{className:"node-item-title"},i,": "),I.createElement(O.Z,{defaultValue:e[n][t],value:e[n][t],addonAfter:I.createElement(H.Z,{type:"reload",style:{fontSize:14},onClick:y()(o=a.handleReloadConfig).call(o,a,d)}),onChange:y()(s=a.handleInputChange).call(s,a,d,1),onFocus:y()(c=a.handleInputFocus).call(c,a,d),onBlur:y()(p=a.handleInputBlur).call(p,a,d)}))):""}))}));return l?r:I.createElement("span",{style:{margin:"1px 1%"}},"无")}},{key:"handleInputChange",value:function(e,t,n){this.props.modifyServiceConfig({pname:this.props.pindex,type:t,path:e,value:n.target.value})}},{key:"handleInputFocus",value:function(e,t){this.setState({default_input_value:t.target.value})}},{key:"handleInputBlur",value:function(e,t){this.state.default_input_value!==t.target.value&&this.props.onBlur({pindex:this.props.pindex,path:this.props.type+"."+e,value:t.target.value})}},{key:"handleReloadConfig",value:function(e,t){this.props.resetServiceConfig({pindex:this.props.pindex,field_path:this.props.type+"."+e})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.type,a=e.dpd;return"Instance"===n?t?I.createElement("div",{className:"edit-panel config-box",style:t.UseCloud?{display:"none"}:{display:"block"}},I.createElement("div",{className:"mod-title"},"实例配置:"),"{}"!==T()(t)?I.createElement("ul",{className:"config-tree"},this.buildInstanceEditByNode(t,1)):I.createElement("p",{style:{lineHeight:"20px"}},"无")):I.createElement("div",{className:"edit-panel config-box",style:{display:"none"}},I.createElement("div",{className:"mod-title"},"实例配置:"),I.createElement("p",{style:{lineHeight:"20px"}},"无")):t?I.createElement("div",{className:"edit-panel config-box"},I.createElement("div",{className:"mod-title"},"Config配置:"),I.createElement("ul",{className:"config-tree"},this.buildConfigEditByNode(t)),I.createElement("div",{className:"mod-title"},"依赖服务:"),I.createElement("p",{style:{lineHeight:"20px"}},a.toString()||"无")):I.createElement("div",{className:"edit-panel config-box"},I.createElement("div",{className:"mod-title"},"Config配置:"),I.createElement("p",{style:{lineHeight:"20px"}},"无"))}}]),n}(I.Component),$=n(24278),z=n.n($),G=n(25110),V=n.n(G),J=n(33733),Y=n.n(J),Q=n(19389),q=n.n(Q),X=n(58309),ee=n.n(X),te=n(39022),ne=n.n(te),ae=n(80040),le=n.n(ae),re=n(45360),oe=n(20666),ie=n(43663);function se(e,t){var n=void 0!==Y()&&q()(e)||e["@@iterator"];if(!n){if(ee()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return ce(e,t);var a=z()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return V()(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ce(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw r}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function pe(e){var t=function(){if("undefined"==typeof Reflect||!l())return!1;if(l().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=l()(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.Z)(this,n)}}var de,ue=function(e){(0,s.Z)(n,e);var t=pe(n);function n(e){var a;(0,r.Z)(this,n),a=t.call(this,e),(0,d.Z)((0,i.Z)(a),"handleSetIps",(function(){var e=a.state,t=e.targetKeys,n=e.max;t.length>n?re.Z.error("IP数量限制"+n+"，目前超出限制！"):(a.props.setip(a.props.pindex,t.join(",")),a.setState({showModal:!1}))})),(0,d.Z)((0,i.Z)(a),"handleShowEditModal",(function(){var e,t=[],n=se(a.state.originIps);try{for(n.s();!(e=n.n()).done;){var l=e.value;t.push(l.key)}}catch(e){n.e(e)}finally{n.f()}a.setState({showModal:!0,targetKeys:t})})),(0,d.Z)((0,i.Z)(a),"handleHideEditModal",(function(){var e,t=a.state.originIps,n=[],l=se(t);try{for(l.s();!(e=l.n()).done;){var r=e.value;n.push(r.key)}}catch(e){l.e(e)}finally{l.f()}a.setState({showModal:!1,existIPs:t,targetKeys:n})})),(0,d.Z)((0,i.Z)(a),"handleTransferIpChange",(function(e,t,n){var l,r=[],o=se(e);try{for(o.s();!(l=o.n()).done;){var i=l.value;r.push({key:i,title:i,description:i,disable:!1})}}catch(e){o.e(e)}finally{o.f()}a.setState({targetKeys:e,existIPs:r})})),(0,d.Z)((0,i.Z)(a),"handleTransferSelectChange",(function(e,t){var n=a.state,l=n.targetKeys,r=n.max;ne()(l).call(l,e).length>r&&re.Z.error("IP数量限制"+r+"，目前超出限制！")}));var l=1;l=a.props.instance&&""!==a.props.instance.MaxReplica?a.props.instance.MaxReplica:9999;var o,s=[],c=a.props.data.IP&&a.props.data.IP.length?a.props.data.IP:[],p=se(c);try{for(p.s();!(o=p.n()).done;){var u=o.value;s.push({key:u,title:u,description:u,disable:!1})}}catch(e){p.e(e)}finally{p.f()}return a.state={originIps:s,existIPs:s,leftIPs:[],sourceIps:[],targetKeys:c||[],selectedKeys:[],ipStr:"",max:l,showModal:!1},a}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.getLeftIps()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.instance,n=e.data,a=1;a=t&&""!==t.MaxReplica?le()(t.MaxReplica):9999;var l,r=[],o=this.props.data.IP&&this.props.data.IP.length?this.props.data.IP:[],i=se(o);try{for(i.s();!(l=i.n()).done;){var s=l.value;r.push({key:s,title:s,description:s,disable:!1})}}catch(e){i.e(e)}finally{i.f()}this.setState({originIps:r,existIPs:r,targetKeys:o,ipStr:n,max:a})}},{key:"getLeftIps",value:function(){var e=this,t=e.props.pname,n=e.props.sname;ie.aJ.getLeftIp({productName:t,serviceName:n}).then((function(t){var n=[];if(0===(t=t.data).code){if(t.data.hosts){var a,l,r=se(t.data.hosts);try{for(r.s();!(l=r.n()).done;){var o,i=l.value,s=!1,c=se(e.state.existIPs);try{for(c.s();!(o=c.n()).done;){o.value===i.ip&&(s=!0)}}catch(e){c.e(e)}finally{c.f()}s||n.push({key:i.ip,title:i.ip,description:i.ip,disable:!1})}}catch(e){r.e(e)}finally{r.f()}e.setState({sourceIps:ne()(a=e.state.existIPs).call(a,n),leftIPs:n})}}else re.Z.error(t.msg)}))}},{key:"handleIpInputChange",value:function(e){(0,this.props.updateip)(this.props.pindex,e.target.value)}},{key:"updateIpInputChange",value:function(e){this.props.setip(this.props.pindex,e.target.value)}},{key:"render",value:function(){var e,t,n,a,l=this.props,r=l.instance,o=l.data;return r?I.createElement("div",{className:"edit-panel",style:{borderBottom:0}},I.createElement("div",{className:"mod-title",style:r.UseCloud?{display:"none"}:{display:"block"}},I.createElement("a",{onClick:this.handleShowEditModal},"编辑ip地址"),"：",I.createElement("span",{style:{padding:10,lineHeight:"20px"}},o.IP?o.IP.join(","):"")),I.createElement("div",{className:"mod-title",style:r.UseCloud?{display:"block"}:{display:"none"}},I.createElement("span",{style:{width:"8%",display:"inline-block"}},"编辑ip地址:",o.IP," "),I.createElement(O.Z,{style:{width:"90%"},placeholder:"多个ip用逗号分开",value:o.IP?o.IP.join(","):"",onChange:y()(e=this.handleIpInputChange).call(e,this),onBlur:y()(t=this.updateIpInputChange).call(t,this)})),I.createElement(N.Z,{visible:this.state.showModal,width:476,onOk:this.handleSetIps,onCancel:this.handleHideEditModal,className:"ip-transfer-modal"},I.createElement(oe.Z,{titles:["未选","已选"],dataSource:this.state.sourceIps,showSearch:!0,targetKeys:this.state.targetKeys,onChange:this.handleTransferIpChange,onSelectChange:this.handleTransferSelectChange,render:function(e){return e.title}}))):I.createElement("div",{className:"edit-panel",style:{borderBottom:0}},I.createElement("div",{className:"mod-title"},I.createElement("span",{style:{width:"8%",display:"inline-block"}},"编辑ip地址:"," "),I.createElement(O.Z,{style:{width:"90%"},placeholder:"多个ip用逗号分开",value:o.IP?o.IP.join(","):"",onChange:y()(n=this.handleIpInputChange).call(n,this),onBlur:y()(a=this.updateIpInputChange).call(a,this)})))}}]),n}(I.Component),he=n(82193);function fe(e){var t=function(){if("undefined"==typeof Reflect||!l())return!1;if(l().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=l()(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.Z)(this,n)}}var me=E.Z.Step,ve=C.Z.Panel;const ye=(0,P.$j)((function(e){return{deploy:e.DeployStore,topnav:e.HeaderStore}}),(function(e){return{actions:(0,B.DE)(h()({},M),e),headerAction:(0,B.DE)(h()({},D),e)}}))(de=function(e){(0,s.Z)(n,e);var t=fe(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,d.Z)((0,i.Z)(a),"deployListInterval",null),(0,d.Z)((0,i.Z)(a),"handleCollapseChange",(function(e){if(void 0!==e){var t=a.props.deploy,n=[];for(var l in t.product.Service)n.push({name:l,data:t.product.Service[l]})}})),(0,d.Z)((0,i.Z)(a),"handleCancelDeploy",(function(){a.props.actions.cancelDeploy({product_name:a.state.product_name,product_version:a.state.product_version})})),a.state={step:0,showCancel:!0,product_name:he.Z.getParamsFromUrl(window.location.href).product_name||"dtlog",product_version:he.Z.getParamsFromUrl(window.location.href).product_version||"",log_modal_visible:!1,logpaths:[],log_service_id:-1},a.deployListInterval=null,a}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.updateProductConfig({product_name:this.state.product_name,product_version:this.state.product_version})}},{key:"updateProductConfig",value:function(e){this.props.actions.updateProductConfig(e)}},{key:"handleServiceSchemaUpdate",value:function(e){this.props.actions.modifyServiceConfig({product_name:this.state.product_name,service_name:e.pindex,product_version:this.state.product_version,field_path:e.path,field:e.value})}},{key:"handleServiceConfigReset",value:function(e){this.props.actions.resetServiceConfig({product_name:this.state.product_name,service_name:e.pindex,product_version:this.state.product_version,field_path:e.field_path})}},{key:"addIpToConfig",value:function(e){this.props.actions.addIpToConfig(e)}},{key:"handleSetServiceIp",value:function(e,t){this.props.actions.handleSetServiceIp({product_name:this.state.product_name,service_name:e,product_version:this.state.product_version,ip:t})}},{key:"handleDoDeploy",value:function(){var e=this,t=this.props.headerAction;this.props.actions.startProductDeploy({product_name:this.state.product_name,product_version:this.props.deploy.product_version},(function(){t.getProductList(),e.setState({step:1}),e.props.actions.getDeployList({product_name:e.state.product_name,product_version:e.state.product_version,deploy_uuid:e.props.deploy.deploy.deploy_uuid},(function(){clearInterval(e.deployListInterval)})),e.deployListInterval=m()((function(){e.props.actions.getDeployList({product_name:e.state.product_name,product_version:e.state.product_version,deploy_uuid:e.props.deploy.deploy.deploy_uuid},(function(){clearInterval(e.deployListInterval)}))}),3e3)}))}},{key:"handleReturnToStepOne",value:function(){this.props.actions.returnToStepOne(),clearInterval(this.deployListInterval)}},{key:"handleShowDeployLog",value:function(e){var t=JSON.parse(e.schema);this.setState({log_modal_visible:!0,logpaths:t.Instance.Logs,log_service_id:e.instance_id})}},{key:"handleLogModalCancel",value:function(){this.setState({log_modal_visible:!1})}},{key:"handleGotoProducts",value:function(){window.location.href="/products"}},{key:"componentWillUnmount",value:function(){clearInterval(this.deployListInterval),this.props.actions.resetDeployStatus()}},{key:"handleSwitchUseCloud",value:function(e){var t=this.props,n=t.deploy,a=t.actions,l=h()({},n.product.Service);for(var r in l)r===e.name&&(l[r].Instance.UseCloud=!l[r].Instance.UseCloud,l[r].Instance.Ips="");a.handleSetServiceIp({product_name:this.state.product_name,service_name:e.name,product_version:this.state.product_version,ip:""}),a.switchUseCloudByProduct(l)}},{key:"handleUpdateIpByInput",value:function(e,t){this.props.actions.updateIpsByService(e,t)}},{key:"render",value:function(){var e,t,n,a,l=this,r=this.props,o=r.deploy,i=r.actions,s=[];for(var c in o.product.Service)s.push({name:c,data:o.product.Service[c]});var p=[{title:"执行时间",dataIndex:"update_time",key:"update_time"},{title:"组件",dataIndex:"service_name",key:"service_name"},{title:"IP",dataIndex:"ip",key:"ip"},{title:"产品版本",dataIndex:"product_version",key:"product_version"},{title:"启动及初始化",dataIndex:"progress",key:"progress",render:function(e,t){var n="active";switch(t.status){case"install fail":case"run fail":case"health-check fail":case"health-check cancelled":n="exception"}return I.createElement("div",{style:{width:"170px"}},I.createElement(S.Z,{percent:t.progress,size:"small",status:n}))}},{title:"启动状态",dataIndex:"status",key:"status",render:function(e,t){var n={};switch(t.status){case"install fail":case"run fail":case"health-check fail":case"health-check cancelled":n={color:"#FF5F5C"};break;case"installed":case"health-checked":n={color:"#12BC6A"}}return I.createElement(k.Z,{title:t.status_message},I.createElement("span",{style:n},e))}},{title:"查看详情",key:"detail",render:function(e,t){var n,a=JSON.parse(t.schema);return a&&a.Instance&&a.Instance.Logs?I.createElement("span",null,I.createElement("a",{style:a.Instance.Logs.length?{display:"inline"}:{display:"none"},onClick:y()(n=l.handleShowDeployLog).call(n,l,t)},"部署详情")):I.createElement("span",null)}}],d={margin:"10px 0",display:"none"},u={margin:"10px 0",display:"none"};switch(o.complete){case"deploy fail":d.display="none",u.display="block";break;case"deployed":d.display="block",u.display="none"}return I.createElement("div",{className:"deploy-page"},I.createElement("div",{className:"config-list-wrapper"},I.createElement(E.Z,{current:this.state.step,style:{marginBottom:"40px"}},I.createElement(me,{title:"组件编排",description:""}),I.createElement(me,{title:"执行部署",description:""})),I.createElement("div",{style:o.deploy.deploy_status?{display:"none"}:{display:"block"}},I.createElement(C.Z,{accordion:!0,onChange:this.handleCollapseChange},_()(s).call(s,(function(e,t){var n,a,r,o,s,c,p=e.name+"   版本:"+e.data.Version;e.data.BaseParsed&&(p=e.name+"   版本:"+e.data.Version+"   继承组件:"+e.data.BaseProduct);var d,u=Object;e.data.Instance&&(u=I.createElement("div",{className:"edit-panel"},I.createElement("span",{style:{fontSize:"14px",color:"#333",fontWeight:500,width:"8%",display:"inline-block"}},"使用云主机："),I.createElement(Z.Z,{size:"small",checked:e.data.Instance.UseCloud,onChange:y()(d=l.handleSwitchUseCloud).call(d,l,e)})));return I.createElement(ve,{header:p,key:(t+1).toString()},u,I.createElement(ue,{data:e.data.ServiceAddr||{},pindex:e.name,pname:l.state.product_name,sname:e.name,instance:e.data.Instance,updateip:y()(n=l.handleUpdateIpByInput).call(n,l),setip:y()(a=l.handleSetServiceIp).call(a,l)}),I.createElement(W,{data:e.data.Instance,type:"Instance",pindex:e.name,modifyServiceConfig:i.modifyServiceInput,resetServiceConfig:y()(r=l.handleServiceConfigReset).call(r,l),onBlur:y()(o=l.handleServiceSchemaUpdate).call(o,l)}),I.createElement(W,{data:e.data.Config,dpd:e.data.DependsOn||[],type:"Config",pindex:e.name,modifyServiceConfig:i.modifyServiceInput,resetServiceConfig:y()(s=l.handleServiceConfigReset).call(s,l),onBlur:y()(c=l.handleServiceSchemaUpdate).call(c,l)}))}))),I.createElement("div",{className:"deploy-btn-box"},I.createElement(x.Z,{type:"primary",style:"deploying"===o.status?{display:"none"}:{display:"inline-block"},onClick:y()(e=this.handleDoDeploy).call(e,this)},"开始部署"),I.createElement(x.Z,{disabled:!0,style:"deploying"===o.status?{display:"inline-block"}:{display:"none"}},"正在部署"))),I.createElement("div",{style:o.deploy.deploy_status?{display:"block"}:{display:"none"}},I.createElement(b.Z,{columns:p,dataSource:o.deploy_list,pagination:!1}),I.createElement(w.Z,{style:d,message:"部署完成",type:"success"}),I.createElement(w.Z,{style:u,message:"部署失败",type:"error"}),I.createElement("div",{className:"option-bar"},I.createElement(x.Z,{onClick:this.handleCancelDeploy},"取消部署"),I.createElement(x.Z,{onClick:y()(t=this.handleReturnToStepOne).call(t,this),style:"installing"===o.status?{display:"none",margin:"0 10px"}:{display:"inline-block",margin:"0 10px"}},"上一步"),I.createElement(x.Z,{onClick:y()(n=this.handleGotoProducts).call(n,this)},"返回版本管理")),I.createElement(N.Z,{title:"执行日志",footer:null,width:900,visible:this.state.log_modal_visible,onCancel:y()(a=this.handleLogModalCancel).call(a,this)},I.createElement(U.Z,{logs:this.state.logpaths,serviceid:this.state.log_service_id,isreset:!this.state.log_modal_visible})))))}}]),n}(I.Component))||de},82193:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(39022),l=n.n(a),r=n(86),o=n.n(r),i=n(11882),s=n.n(i),c=n(97606),p=n.n(c),d=n(28222),u=n.n(d),h=n(2357),f=n.n(h),m=n(45360),v=n(36808),y=n(4243);const g={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)},percent:function(e,t){return e&&e!==1/0?(e>1&&(e=1),t=t||2,t=Math.pow(10,t),Math.round(e*t*100)/t+"%"):"0%"},getCssText:function(e){var t="";for(var n in e)t+=n+":"+e[n]+";";return t},formateDateTime:function(e){var t,n,a,r,o;if(!e)return"";var i=new Date(e),s=i.getFullYear(),c=i.getMonth()+1+"",p=i.getDate()+"",d=i.getHours()+"",u=i.getMinutes()+"",h=i.getSeconds()+"";return 1===c.toString().length&&(c="0".concat(c)),1===p.toString().length&&(p="0".concat(p)),1===d.toString().length&&(d="0".concat(d)),1===u.toString().length&&(u="0".concat(u)),1===h.toString().length&&(h="0".concat(h)),l()(t=l()(n=l()(a=l()(r=l()(o="".concat(s,"-")).call(o,c,"-")).call(r,p," ")).call(a,d,":")).call(n,u,":")).call(t,h)},formateDate:function(e){var t,n;if(!e)return"";var a=new Date(e),r=a.getFullYear(),o=a.getMonth()+1+"",i=a.getDate()+"";return 1===o.toString().length&&(o="0".concat(o)),1===i.toString().length&&(i="0".concat(i)),l()(t=l()(n="".concat(r,"-")).call(n,o,"-")).call(t,i)},trim:function(e){return"string"==typeof e?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},messageFilter:function(e,t,n,a){1001===e.status.code&&(a||m.Z.success("成功"),t&&t())},getTableParam:function(e){var t={};return o()(e).call(e,(function(e,n){var a=e.split("-");t[a[1]]=a[2]})),t},setAlertControl:function(e){var t={},n=e.alert_control;return"1"===n?t.close=1:(t.close=0,e["alert_num_"+n]&&(t.times_after_close=e["alert_num_"+n]),e["recover_num_"+n]&&(t.close_after_long_time_reset_amount=e["recover_num_"+n],t.close_after_long_time_reset_unit=e["recover_unit_"+n])),t},getAlertControl:function(e){var t={alert_control:""};return 0===e.close&&(0!==e.times_after_close?(t.alert_control="2",t["alert_num_"+t.alert_control]=e.times_after_close):t.alert_control="3",""!==e.close_after_long_time_reset_amount&&("2"===t.alert_control&&(t.alert_control="4"),t["alert_num_"+t.alert_control]=e.times_after_close,t["recover_num_"+t.alert_control]=e.close_after_long_time_reset_amount,t["recover_unit_"+t.alert_control]=e.close_after_long_time_reset_unit)),t},filterOption:function(e,t){var n;return-1!==s()(n=t.props.children).call(n,e)},getParamsFromUrl:function(e){var t={},n=[],a="",l="",r=e.substring(s()(e).call(e,"?")+1,e.length).split("&");for(var o in r)a=(n=r[o].split("="))[0],l=n[1],t[a]=l;return t},jsonToQuery:function(e){var t;return e?function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}(p()(t=u()(e)).call(t,(function(t){return void 0===e[t]?"":encodeURIComponent(t)+"="+encodeURIComponent(e[t])}))).join("&"):""},checkNullObj:function(e){return 0===u()(e).length},serviceCallback:function(e,t,n){0===e.data.code?(m.Z.success(t),n&&n()):m.Z.error(e.data.msg)},noAuthorityToDO:function(e,t){return!e[t]&&(m.Z.error("权限不足，请联系管理员!"),!0)},get k8sNamespace(){return v.get(y.E9.NAMESPACE)},setNaviKey:function(e,t){sessionStorage.setItem("firstLevelNav",e),sessionStorage.setItem("siderLevelNav",t)},formatGBUnit:function(e){return s()(e).call(e,"MB")>-1?f()(e.replace("MB",""))/1024:s()(e).call(e,"KB")>-1?f()(e.replace("KB",""))/1024/1024:s()(e).call(e,"GB")>-1?f()(e.replace("GB","")):s()(e).call(e,"TB")>-1?1024*f()(e.replace("TB","")):0}}}}]);